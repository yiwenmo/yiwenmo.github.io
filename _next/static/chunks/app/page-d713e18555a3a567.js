(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4384:(e,t,n)=>{"use strict";n.d(t,{default:()=>f});var i=n(5155),o=n(3816),r=n(7558),a=n(1401),l=n(2115),s=n(3264);let c=(0,n(6669).jt)(),d=(0,a.b)({uColorSlow:new s.Q1f("#8A2BE2"),uColorMid:new s.Q1f("#00FFFF"),uColorFast:new s.Q1f("#FFD700"),uFadeNear:2,uFadeFar:8,uGlobalAlpha:1},"\n    attribute vec2 aLifetime;\n    attribute float aVelocity;\n    varying float vLifetime;\n    varying float vVelocity;\n    varying float vDist;\n\n    void main() {\n      vLifetime = aLifetime.x / aLifetime.y;\n      vVelocity = aVelocity;\n\n      vec4 viewPos = modelViewMatrix * vec4(position, 1.0);\n      vDist = length(viewPos.xyz);\n\n      gl_PointSize = (vLifetime * vLifetime) * 6.0 + 2.0;\n      gl_Position = projectionMatrix * viewPos;\n    }\n  ","\n    uniform vec3 uColorSlow;\n    uniform vec3 uColorMid;\n    uniform vec3 uColorFast;\n    uniform float uFadeNear;\n    uniform float uFadeFar;\n    uniform float uGlobalAlpha;\n\n    varying float vLifetime;\n    varying float vVelocity;\n    varying float vDist;\n\n    void main() {\n      float distToCenter = distance(gl_PointCoord, vec2(0.5));\n      float circle = 1.0 - smoothstep(0.45, 0.5, distToCenter);\n      if (circle < 0.01) discard;\n\n      float lifeOpacity = smoothstep(0.0, 0.2, vLifetime) * (1.0 - smoothstep(0.8, 1.0, vLifetime));\n      float depthFade = 1.0 - smoothstep(uFadeNear, uFadeFar, vDist);\n      float finalOpacity = lifeOpacity * depthFade * circle;\n      if (finalOpacity < 0.01) discard;\n\n      float speedT = clamp(vVelocity, 0.0, 1.0);\n      vec3 slowMid = mix(uColorSlow, uColorMid, speedT);\n      vec3 baseColor = mix(slowMid, uColorFast, speedT * speedT);\n\n      float glow = smoothstep(0.4, 0.0, distToCenter);\n      vec3 finalColor = baseColor + baseColor * glow * 0.6;\n\n      gl_FragColor = vec4(finalColor, finalOpacity * uGlobalAlpha);\n    }\n  ");function u(){let{camera:e}=(0,o.A)(),t=(0,l.useRef)(null),n=(0,l.useMemo)(()=>new d,[]),r=(0,l.useRef)([0,0]),a=(0,l.useRef)(null);(0,l.useEffect)(()=>{let t=e=>{r.current=[e.clientX/window.innerWidth,1-e.clientY/window.innerHeight]},n=t=>{let n=new s.I9Y(t.clientX/window.innerWidth*2-1,-(2*(t.clientY/window.innerHeight))+1),i=new s.tBo;i.setFromCamera(n,e),a.current={position:i.ray.origin.clone().add(i.ray.direction.clone().multiplyScalar(5)),time:.001*performance.now()}};return window.addEventListener("mousemove",t),window.addEventListener("click",n),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("click",n)}},[e]);let u=(0,l.useMemo)(()=>{let e=new Float32Array(15e3),t=new Float32Array(1e4),n=new Float32Array(5e3);for(let i=0;i<5e3;i++){e[3*i]=(Math.random()-.5)*10,e[3*i+1]=(Math.random()-.5)*10,e[3*i+2]=(Math.random()-.5)*10;let o=2+2*Math.random();t[2*i]=Math.random()*o,t[2*i+1]=o,n[i]=0}return{positions:e,lifetimes:t,velocities:n}},[]);return(0,o.C)((e,n)=>{if(!t.current)return;let i=t.current.geometry.attributes.position,o=t.current.geometry.attributes.aLifetime,l=t.current.geometry.attributes.aVelocity,d=.001*performance.now(),u=new s.Pq0((r.current[0]-.5)*10,(r.current[1]-.5)*10,0),f=new s.Pq0;for(let e=0;e<5e3;e++){let t=o.getX(e)-n,r=o.getY(e);t<=0&&(i.setXYZ(e,(Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10),t=r),f.fromBufferAttribute(i,e);let m=c(f.x,f.y,f.z,d),v=new s.Pq0().subVectors(u,f).normalize(),w=4*(1-Math.min(f.distanceTo(u)/10,1));if(f.addScaledVector(v,w*m*n),a.current)if(d-a.current.time<.5){let e=Math.max(0,1-f.distanceTo(a.current.position)/2),t=new s.Pq0().subVectors(f,a.current.position).normalize();f.addScaledVector(t,e*n*5)}else a.current=null;i.setXYZ(e,f.x,f.y,f.z),o.setX(e,t),l.setX(e,Math.abs(m))}i.needsUpdate=!0,o.needsUpdate=!0,l.needsUpdate=!0}),(0,i.jsxs)("points",{ref:t,children:[(0,i.jsxs)("bufferGeometry",{children:[(0,i.jsx)("bufferAttribute",{attach:"attributes-position",args:[u.positions,3]}),(0,i.jsx)("bufferAttribute",{attach:"attributes-aLifetime",args:[u.lifetimes,2]}),(0,i.jsx)("bufferAttribute",{attach:"attributes-aVelocity",args:[u.velocities,1]})]}),(0,i.jsx)("primitive",{object:n,attach:"material"})]})}function f(){return(0,i.jsx)("div",{className:"fixed inset-0 -z-10",children:(0,i.jsx)(r.Hl,{camera:{position:[0,0,10],fov:75},style:{background:"transparent"},children:(0,i.jsx)(l.Suspense,{fallback:null,children:(0,i.jsx)(u,{})})})})}},9715:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6874,23)),Promise.resolve().then(n.t.bind(n,3063,23)),Promise.resolve().then(n.bind(n,4384))}},e=>{var t=t=>e(e.s=t);e.O(0,[367,831,413,941,441,684,358],()=>t(9715)),_N_E=e.O()}]);